

.. _sphx_glr_auto_examples_02_preprocessing_plot_functional_registration.py:


fMRI registration
=================

Standard functional preprocessing and registration of functional image to
anatomical.



Retrieve data
-------------



.. code-block:: python

    from sammba import data_fetchers

    retest = data_fetchers.fetch_zurich_test_retest(subjects=[0],
                                                    correct_headers=True)







Define the write directory
--------------------------
Note that this directory needs to be empty, to ovoid overwrting conflicts.



.. code-block:: python

    import os

    write_dir = os.path.join(os.getcwd(), 'results_1366')
    if not os.path.exists(write_dir):
        os.makedirs(write_dir)







Functional to anatomical registration
-------------------------------------



.. code-block:: python

    from sammba import registration

    registered_func_filename, resampled_anat_filename = \
        registration.func_to_anat(retest.func[0], retest.anat[0], tr=1.,
                                  write_dir=write_dir)





.. rst-class:: sphx-glr-script-out

 Out::

    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext
    .nii.gz ext


Check out the results
---------------------



.. code-block:: python

    from nilearn import plotting, image

    display = plotting.plot_epi(image.mean_img(registered_func_filename),
                                title='anat edges on top of registered mean EPI')
    display.add_edges(resampled_anat_filename)
    plotting.show()



.. image:: /auto_examples/02_preprocessing/images/sphx_glr_plot_functional_registration_001.png
    :align: center




**Total running time of the script:** ( 6 minutes  57.894 seconds)



.. container:: sphx-glr-footer


  .. container:: sphx-glr-download

     :download:`Download Python source code: plot_functional_registration.py <plot_functional_registration.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: plot_functional_registration.ipynb <plot_functional_registration.ipynb>`

.. rst-class:: sphx-glr-signature

    `Generated by Sphinx-Gallery <http://sphinx-gallery.readthedocs.io>`_
