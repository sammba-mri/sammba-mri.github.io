
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Sammba-MRI:Small mammals NeuroImaging in Python &#8212; Multimodal Imaging of Neurodegenerative Diseases and Therapies</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.4.1. sammba.segmentation.brain_extraction_report" href="sammba.segmentation.brain_extraction_report.html" />
    <link rel="prev" title="5.3.6. sammba.registration.TemplateRegistrator" href="sammba.registration.TemplateRegistrator.html" />
<meta content="True" name="HandheldFriendly">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="keywords" content="sammba-mri, neuroimaging, python, small animal, rodent, mouse, rat">


<script type="text/javascript">
function updateTopMenuPosition(height, width) {
    if($(window).scrollTop() > height && $(window).outerWidth() > 1024) {
        //begin to scroll
        $('.related-wrapper').css("z-index", 1000)
        $('.related-wrapper').css("position", "sticky")
        $('.related-wrapper').css("top", 0)
        $('.related-wrapper').css("width", width)
    } else {
        //lock it back into place
        $('.related-wrapper').css("position", "relative")
        $('.related-wrapper').css("top", 0)
    }
}

$(function() {
    var banner_height = $('#logo-banner').outerHeight()
    var banner_width = $('#logo-banner').outerWidth()
    var width = $('.related-wrapper').css("height", $('.related').outerHeight())

    updateTopMenuPosition(banner_height, width)

    $(window).scroll(function(event) {
        updateTopMenuPosition(banner_height, width)
    });

    $(window).resize(function(event) {
        var banner_width = $('#logo-banner').outerWidth()
        var menu_height = $('.related').outerHeight()
        $('.related').css("width", banner_width)
        $('.related-wrapper').css("height", menu_height)
        updateTopMenuPosition(banner_height, width)
    })
});
</script>
<script type="text/javascript">
function updateSideBarPosition(top, offset, sections) {
    var pos = $(window).scrollTop()
    // Lock the table of content to a fixed position once we scroll enough
    var topShift = 2 * offset
    if(pos > top + topShift + 1) {
        // begin to scroll with sticky menu bar
        var topShift = -topShift + 1
        if ($(window).outerWidth() < 1024) {
            // compensate top menu that disappears
            topShift -= offset + 1
        }
        $('.sphinxsidebarwrapper').css("position", "fixed")
        $('.sphinxsidebarwrapper').css("top", topShift)
    }
    else {
        //lock it back into place
        $('.sphinxsidebarwrapper').css("position", "relative")
        $('.sphinxsidebarwrapper').css("top",0)
    }

    // Highlight the current section
    i = 0
    current_section = 0
    $('a.internal').removeClass('active')
    for(i in sections) {
        if(sections[i] > pos) {
            break
        };
        if($('a.internal[href$="' + i + '"]').is(':visible')){
            current_section = i
        };
    }
    $('a.internal[href$="' + current_section + '"]').addClass('active')
    $('a.internal[href$="' + current_section + '"]').parent().addClass('active')
}

$(function () {
    // Lock the table of content to a fixed position once we scroll enough
    var tocOffset = $('.related-wrapper').outerHeight()
    var marginTop = parseFloat($('.sphinxsidebarwrapper').css('margin-top').replace(/auto/, 0))
    var top = $('.sphinxsidebarwrapper').offset().top - marginTop
    sections = {}
    url = document.URL.replace(/#.*$/, "")

    // Grab positions of our sections
    $('.headerlink').each(function(){
        sections[this.href.replace(url, '')] = $(this).offset().top - 50
    });

    updateSideBarPosition(top, tocOffset, sections)

    $(window).scroll(function(event) {
        updateSideBarPosition(top, tocOffset, sections)
    });

    $(window).resize(function(event) {
        tocOffset = $('.related-wrapper').outerHeight()
        updateSideBarPosition(top, tocOffset, sections)
    });
});
</script>


<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-41920728-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

  </head><body>
<div id="logo-banner">
  <!-- A tag cloud to make it easy for people to find what they are
                         looking for -->
 <div class="tags">
  <ul>
    <li>
      <big><a href="../auto_examples/01_template/plot_register.html">Template creation</a></big>
    </li>
    <li>
      <small><a href="../auto_examples/02_preprocessing/plot_fmri_coregistration.html">fMRI preprocessing</a></small>
    </li>
    <li>
      <a href="../modules/reference.html#module-sammba.data_fetchers">Datasets</a>
    </li>
  </ul>
 </div>

  <div class="banner">
    <h1>Sammba-MRI:</h1>
    <h2>Small mammals NeuroImaging in Python</h2>
  </div>
  <div class="search_form">
    <div class="gcse-search" id="cse" style="width: 100%;"></div>
    <script>
      (function() {
        var cx = '017289614950330089114:elrt9qoutrq';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
  </div>
</div>



<div class=related-wrapper>
    
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="sammba.segmentation.brain_extraction_report.html" title="5.4.1. sammba.segmentation.brain_extraction_report"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sammba.registration.TemplateRegistrator.html" title="5.3.6. sammba.registration.TemplateRegistrator"
             accesskey="P">previous</a> |</li>
<li><a href="../index.html">Sammba-MRI Home</a> |&nbsp;</li>
<li><a href="../user_guide.html">User Guide</a> |&nbsp;</li>
<li><a href="../auto_examples/index.html">Examples</a> |&nbsp;</li>
<li><a href="../reference.html">Reference</a> |&nbsp;</li>
<li id="navbar-about"><a href="../authors.html">About</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../user_guide.html" >User guide: table of contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../reference.html" accesskey="U">5. sammba-MRI API Reference</a> &#187;</li> 
      </ul>
    </div>
</div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Giving credit </h4>
  <ul class="simple">
    <li><p>Please consider <a href="../authors.html#citing">citing the
                    papers</a>.</p></li>
  </ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="sammba.registration.TemplateRegistrator.html"
                        title="previous chapter">5.3.6. sammba.registration.TemplateRegistrator</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sammba.segmentation.brain_extraction_report.html"
                        title="next chapter">5.4.1. sammba.segmentation.brain_extraction_report</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This page is a reference documentation. It only explains the class
signature, and not how to use it. Please refer to the
<a class="reference internal" href="../user_guide.html#user-guide"><span class="std std-ref">user guide</span></a> for the big picture.</p>
</div>
<div class="section" id="sammba-registration-coregistrator">
<h1>5.3.7. sammba.registration.Coregistrator<a class="headerlink" href="#sammba-registration-coregistrator" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="sammba.registration.Coregistrator">
<em class="property">class </em><code class="sig-prename descclassname">sammba.registration.</code><code class="sig-name descname">Coregistrator</code><span class="sig-paren">(</span><em class="sig-param">brain_volume=None</em>, <em class="sig-param">output_dir=None</em>, <em class="sig-param">caching=False</em>, <em class="sig-param">verbose=True</em>, <em class="sig-param">use_rats_tool=True</em>, <em class="sig-param">clipping_fraction=0.2</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for registering anatomical image to perfusion/functional images from
one animal in native space.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>brain_volume</strong> : int or None, optional</p>
<blockquote>
<div><p>Volume of the brain in mm3 used for brain extraction. Typically 400 for mouse
and 1650 for rat. Used only if prior rigid body registration is needed.</p>
</div></blockquote>
<p><strong>output_dir</strong> : str or None, optional</p>
<blockquote>
<div><p>Path to the output directory. If None, current directory is used.</p>
</div></blockquote>
<p><strong>caching</strong> : bool, optional</p>
<blockquote>
<div><p>If True, caching is used for all the registration steps.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity level. Note that caching implies some verbosity in any case.</p>
</div></blockquote>
<p><strong>use_rats_tool</strong> : bool, optional</p>
<blockquote>
<div><p>If True, brain mask is computed using RATS Mathematical Morphology.
Otherwise, a histogram-based brain segmentation is used.</p>
</div></blockquote>
<p><strong>clipping_fraction</strong> : float or None, optional</p>
<blockquote>
<div><p>Clip level fraction is passed to
nipype.interfaces.afni.Unifize, to tune
the bias correction step done prior to brain mask segmentation.
Only values between 0.1 and 0.9 are accepted. Smaller fractions tend to
make the mask larger. If None, no unifization is done for brain mask
computation.</p>
</div></blockquote>
</dd>
</dl>
<dl class="method">
<dt id="sammba.registration.Coregistrator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">brain_volume=None</em>, <em class="sig-param">output_dir=None</em>, <em class="sig-param">caching=False</em>, <em class="sig-param">verbose=True</em>, <em class="sig-param">use_rats_tool=True</em>, <em class="sig-param">clipping_fraction=0.2</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="sammba.registration.Coregistrator.fit_modality">
<code class="sig-name descname">fit_modality</code><span class="sig-paren">(</span><em class="sig-param">in_file</em>, <em class="sig-param">modality</em>, <em class="sig-param">slice_timing=True</em>, <em class="sig-param">t_r=None</em>, <em class="sig-param">prior_rigid_body_registration=None</em>, <em class="sig-param">reorient_only=False</em>, <em class="sig-param">brain_mask_file=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator.fit_modality" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare and perform coregistration.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>in_file</strong> : str</p>
<blockquote>
<div><p>Path to the raw modality image.</p>
</div></blockquote>
<p><strong>modality</strong> : one of {‘perf’, ‘func’}</p>
<blockquote>
<div><p>Name of the MRI modality.</p>
</div></blockquote>
<p><strong>slice_timing</strong> : bool, optional</p>
<blockquote>
<div><p>If True, slice timing correction is performed</p>
</div></blockquote>
<p><strong>t_r</strong> : float, optional</p>
<blockquote>
<div><p>Repetition time, only needed for slice timing correction.</p>
</div></blockquote>
<p><strong>prior_rigid_body_registration</strong> : bool, optional</p>
<blockquote>
<div><p>If True, a rigid-body registration of the anat to the modality is
performed prior to the warp. Useful if the images headers have
missing/wrong information.
NOTE: prior_rigid_body_registration is deprecated from 0.1 and
will be removed in next release. Use <cite>reorient_only</cite> instead.</p>
</div></blockquote>
<p><strong>reorient_only</strong> :  bool, optional</p>
<blockquote>
<div><p>If True, the rigid-body registration of the anat to the func is
not performed and only reorientation is done.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the coregistrator itself</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sammba.registration.Coregistrator.fit_transform">
<code class="sig-name descname">fit_transform</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">y=None</em>, <em class="sig-param">**fit_params</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator.fit_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit to data, then transform it.</p>
<p>Fits transformer to X and y with optional parameters fit_params
and returns a transformed version of X.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> : numpy array of shape [n_samples, n_features]</p>
<blockquote>
<div><p>Training set.</p>
</div></blockquote>
<p><strong>y</strong> : numpy array of shape [n_samples]</p>
<blockquote>
<div><p>Target values.</p>
</div></blockquote>
<p><strong>**fit_params</strong> : dict</p>
<blockquote>
<div><p>Additional fit parameters.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>X_new</strong> : numpy array of shape [n_samples, n_features_new]</p>
<blockquote>
<div><p>Transformed array.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sammba.registration.Coregistrator.get_params">
<code class="sig-name descname">get_params</code><span class="sig-paren">(</span><em class="sig-param">deep=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator.get_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Get parameters for this estimator.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deep</strong> : bool, default=True</p>
<blockquote>
<div><p>If True, will return the parameters for this estimator and
contained subobjects that are estimators.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>params</strong> : mapping of string to any</p>
<blockquote>
<div><p>Parameter names mapped to their values.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sammba.registration.Coregistrator.segment">
<code class="sig-name descname">segment</code><span class="sig-paren">(</span><em class="sig-param">in_file</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator.segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bias field correction and brain extraction</p>
</dd></dl>

<dl class="method">
<dt id="sammba.registration.Coregistrator.set_params">
<code class="sig-name descname">set_params</code><span class="sig-paren">(</span><em class="sig-param">**params</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator.set_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters of this estimator.</p>
<p>The method works on simple estimators as well as on nested objects
(such as pipelines). The latter have parameters of the form
<code class="docutils literal notranslate"><span class="pre">&lt;component&gt;__&lt;parameter&gt;</span></code> so that it’s possible to update each
component of a nested object.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**params</strong> : dict</p>
<blockquote>
<div><p>Estimator parameters.</p>
</div></blockquote>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>self</strong> : object</p>
<blockquote>
<div><p>Estimator instance.</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sammba.registration.Coregistrator.transform_modality_like">
<code class="sig-name descname">transform_modality_like</code><span class="sig-paren">(</span><em class="sig-param">apply_to_file</em>, <em class="sig-param">modality</em><span class="sig-paren">)</span><a class="headerlink" href="#sammba.registration.Coregistrator.transform_modality_like" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies modality coregristration to a file in the modality space.</p>
</dd></dl>

</dd></dl>

<div style='clear:both'></div></div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
            &copy; 2017, The sammba-MRI developers.
        <span style="padding-left: 5ex;">
          <a href="../_sources/generated/sammba.registration.Coregistrator.rst.txt"
        	 rel="nofollow">Show this page source</a>
        </span>
    </div>
  </body>
</html>